{"ast":null,"code":"/**\n * Identicon.js 2.3.3\n * http://github.com/stewartlord/identicon.js\n *\n * PNGLib required for PNG output\n * http://www.xarg.org/download/pnglib.js\n *\n * Copyright 2018, Stewart Lord\n * Released under the BSD license\n * http://www.opensource.org/licenses/bsd-license.php\n */\n(function () {\n  var PNGlib;\n\n  if (typeof module !== 'undefined' && typeof module.exports !== 'undefined') {\n    PNGlib = require('./pnglib');\n  } else {\n    PNGlib = window.PNGlib;\n  }\n\n  var Identicon = function (hash, options) {\n    if (typeof hash !== 'string' || hash.length < 15) {\n      throw 'A hash of at least 15 characters is required.';\n    }\n\n    this.defaults = {\n      background: [240, 240, 240, 255],\n      margin: 0.08,\n      size: 64,\n      saturation: 0.7,\n      brightness: 0.5,\n      format: 'png'\n    };\n    this.options = typeof options === 'object' ? options : this.defaults; // backward compatibility with old constructor (hash, size, margin)\n\n    if (typeof arguments[1] === 'number') {\n      this.options.size = arguments[1];\n    }\n\n    if (arguments[2]) {\n      this.options.margin = arguments[2];\n    }\n\n    this.hash = hash;\n    this.background = this.options.background || this.defaults.background;\n    this.size = this.options.size || this.defaults.size;\n    this.format = this.options.format || this.defaults.format;\n    this.margin = this.options.margin !== undefined ? this.options.margin : this.defaults.margin; // foreground defaults to last 7 chars as hue at 70% saturation, 50% brightness\n\n    var hue = parseInt(this.hash.substr(-7), 16) / 0xfffffff;\n    var saturation = this.options.saturation || this.defaults.saturation;\n    var brightness = this.options.brightness || this.defaults.brightness;\n    this.foreground = this.options.foreground || this.hsl2rgb(hue, saturation, brightness);\n  };\n\n  Identicon.prototype = {\n    background: null,\n    foreground: null,\n    hash: null,\n    margin: null,\n    size: null,\n    format: null,\n    image: function () {\n      return this.isSvg() ? new Svg(this.size, this.foreground, this.background) : new PNGlib(this.size, this.size, 256);\n    },\n    render: function () {\n      var image = this.image(),\n          size = this.size,\n          baseMargin = Math.floor(size * this.margin),\n          cell = Math.floor((size - baseMargin * 2) / 5),\n          margin = Math.floor((size - cell * 5) / 2),\n          bg = image.color.apply(image, this.background),\n          fg = image.color.apply(image, this.foreground); // the first 15 characters of the hash control the pixels (even/odd)\n      // they are drawn down the middle first, then mirrored outwards\n\n      var i, color;\n\n      for (i = 0; i < 15; i++) {\n        color = parseInt(this.hash.charAt(i), 16) % 2 ? bg : fg;\n\n        if (i < 5) {\n          this.rectangle(2 * cell + margin, i * cell + margin, cell, cell, color, image);\n        } else if (i < 10) {\n          this.rectangle(1 * cell + margin, (i - 5) * cell + margin, cell, cell, color, image);\n          this.rectangle(3 * cell + margin, (i - 5) * cell + margin, cell, cell, color, image);\n        } else if (i < 15) {\n          this.rectangle(0 * cell + margin, (i - 10) * cell + margin, cell, cell, color, image);\n          this.rectangle(4 * cell + margin, (i - 10) * cell + margin, cell, cell, color, image);\n        }\n      }\n\n      return image;\n    },\n    rectangle: function (x, y, w, h, color, image) {\n      if (this.isSvg()) {\n        image.rectangles.push({\n          x: x,\n          y: y,\n          w: w,\n          h: h,\n          color: color\n        });\n      } else {\n        var i, j;\n\n        for (i = x; i < x + w; i++) {\n          for (j = y; j < y + h; j++) {\n            image.buffer[image.index(i, j)] = color;\n          }\n        }\n      }\n    },\n    // adapted from: https://gist.github.com/aemkei/1325937\n    hsl2rgb: function (h, s, b) {\n      h *= 6;\n      s = [b += s *= b < .5 ? b : 1 - b, b - h % 1 * s * 2, b -= s *= 2, b, b + h % 1 * s, b + s];\n      return [s[~~h % 6] * 255, // red\n      s[(h | 16) % 6] * 255, // green\n      s[(h | 8) % 6] * 255 // blue\n      ];\n    },\n    toString: function (raw) {\n      // backward compatibility with old toString, default to base64\n      if (raw) {\n        return this.render().getDump();\n      } else {\n        return this.render().getBase64();\n      }\n    },\n    isSvg: function () {\n      return this.format.match(/svg/i);\n    }\n  };\n\n  var Svg = function (size, foreground, background) {\n    this.size = size;\n    this.foreground = this.color.apply(this, foreground);\n    this.background = this.color.apply(this, background);\n    this.rectangles = [];\n  };\n\n  Svg.prototype = {\n    size: null,\n    foreground: null,\n    background: null,\n    rectangles: null,\n    color: function (r, g, b, a) {\n      var values = [r, g, b].map(Math.round);\n      values.push(a >= 0 && a <= 255 ? a / 255 : 1);\n      return 'rgba(' + values.join(',') + ')';\n    },\n    getDump: function () {\n      var i,\n          xml,\n          rect,\n          fg = this.foreground,\n          bg = this.background,\n          stroke = this.size * 0.005;\n      xml = \"<svg xmlns='http://www.w3.org/2000/svg'\" + \" width='\" + this.size + \"' height='\" + this.size + \"'\" + \" style='background-color:\" + bg + \";'>\" + \"<g style='fill:\" + fg + \"; stroke:\" + fg + \"; stroke-width:\" + stroke + \";'>\";\n\n      for (i = 0; i < this.rectangles.length; i++) {\n        rect = this.rectangles[i];\n        if (rect.color == bg) continue;\n        xml += \"<rect \" + \" x='\" + rect.x + \"'\" + \" y='\" + rect.y + \"'\" + \" width='\" + rect.w + \"'\" + \" height='\" + rect.h + \"'\" + \"/>\";\n      }\n\n      xml += \"</g></svg>\";\n      return xml;\n    },\n    getBase64: function () {\n      if ('function' === typeof btoa) {\n        return btoa(this.getDump());\n      } else if (Buffer) {\n        return new Buffer(this.getDump(), 'binary').toString('base64');\n      } else {\n        throw 'Cannot generate base64 output';\n      }\n    }\n  };\n\n  if (typeof module !== 'undefined' && typeof module.exports !== 'undefined') {\n    module.exports = Identicon;\n  } else {\n    window.Identicon = Identicon;\n  }\n})();","map":{"version":3,"sources":["/Users/cengwenxin/Desktop/6883project/node_modules/identicon.js/identicon.js"],"names":["PNGlib","module","exports","require","window","Identicon","hash","options","length","defaults","background","margin","size","saturation","brightness","format","arguments","undefined","hue","parseInt","substr","foreground","hsl2rgb","prototype","image","isSvg","Svg","render","baseMargin","Math","floor","cell","bg","color","apply","fg","i","charAt","rectangle","x","y","w","h","rectangles","push","j","buffer","index","s","b","toString","raw","getDump","getBase64","match","r","g","a","values","map","round","join","xml","rect","stroke","btoa","Buffer"],"mappings":"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","sourcesContent":["/**\n * Identicon.js 2.3.3\n * http://github.com/stewartlord/identicon.js\n *\n * PNGLib required for PNG output\n * http://www.xarg.org/download/pnglib.js\n *\n * Copyright 2018, Stewart Lord\n * Released under the BSD license\n * http://www.opensource.org/licenses/bsd-license.php\n */\n\n(function() {\n    var PNGlib;\n    if (typeof module !== 'undefined' && typeof module.exports !== 'undefined') {\n        PNGlib = require('./pnglib');\n    } else {\n        PNGlib = window.PNGlib;\n    }\n\n    var Identicon = function(hash, options){\n        if (typeof(hash) !== 'string' || hash.length < 15) {\n            throw 'A hash of at least 15 characters is required.';\n        }\n\n        this.defaults = {\n            background: [240, 240, 240, 255],\n            margin:     0.08,\n            size:       64,\n            saturation: 0.7,\n            brightness: 0.5,\n            format:     'png'\n        };\n\n        this.options = typeof(options) === 'object' ? options : this.defaults;\n\n        // backward compatibility with old constructor (hash, size, margin)\n        if (typeof(arguments[1]) === 'number') { this.options.size   = arguments[1]; }\n        if (arguments[2])                      { this.options.margin = arguments[2]; }\n\n        this.hash        = hash\n        this.background  = this.options.background || this.defaults.background;\n        this.size        = this.options.size       || this.defaults.size;\n        this.format      = this.options.format     || this.defaults.format;\n        this.margin      = this.options.margin !== undefined ? this.options.margin : this.defaults.margin;\n\n        // foreground defaults to last 7 chars as hue at 70% saturation, 50% brightness\n        var hue          = parseInt(this.hash.substr(-7), 16) / 0xfffffff;\n        var saturation   = this.options.saturation || this.defaults.saturation;\n        var brightness   = this.options.brightness || this.defaults.brightness;\n        this.foreground  = this.options.foreground || this.hsl2rgb(hue, saturation, brightness);\n    };\n\n    Identicon.prototype = {\n        background: null,\n        foreground: null,\n        hash:       null,\n        margin:     null,\n        size:       null,\n        format:     null,\n\n        image: function(){\n            return this.isSvg()\n                ? new Svg(this.size, this.foreground, this.background)\n                : new PNGlib(this.size, this.size, 256);\n        },\n\n        render: function(){\n            var image      = this.image(),\n                size       = this.size,\n                baseMargin = Math.floor(size * this.margin),\n                cell       = Math.floor((size - (baseMargin * 2)) / 5),\n                margin     = Math.floor((size - cell * 5) / 2),\n                bg         = image.color.apply(image, this.background),\n                fg         = image.color.apply(image, this.foreground);\n\n            // the first 15 characters of the hash control the pixels (even/odd)\n            // they are drawn down the middle first, then mirrored outwards\n            var i, color;\n            for (i = 0; i < 15; i++) {\n                color = parseInt(this.hash.charAt(i), 16) % 2 ? bg : fg;\n                if (i < 5) {\n                    this.rectangle(2 * cell + margin, i * cell + margin, cell, cell, color, image);\n                } else if (i < 10) {\n                    this.rectangle(1 * cell + margin, (i - 5) * cell + margin, cell, cell, color, image);\n                    this.rectangle(3 * cell + margin, (i - 5) * cell + margin, cell, cell, color, image);\n                } else if (i < 15) {\n                    this.rectangle(0 * cell + margin, (i - 10) * cell + margin, cell, cell, color, image);\n                    this.rectangle(4 * cell + margin, (i - 10) * cell + margin, cell, cell, color, image);\n                }\n            }\n\n            return image;\n        },\n\n        rectangle: function(x, y, w, h, color, image){\n            if (this.isSvg()) {\n                image.rectangles.push({x: x, y: y, w: w, h: h, color: color});\n            } else {\n                var i, j;\n                for (i = x; i < x + w; i++) {\n                    for (j = y; j < y + h; j++) {\n                        image.buffer[image.index(i, j)] = color;\n                    }\n                }\n            }\n        },\n\n        // adapted from: https://gist.github.com/aemkei/1325937\n        hsl2rgb: function(h, s, b){\n            h *= 6;\n            s = [\n                b += s *= b < .5 ? b : 1 - b,\n                b - h % 1 * s * 2,\n                b -= s *= 2,\n                b,\n                b + h % 1 * s,\n                b + s\n            ];\n\n            return[\n                s[ ~~h    % 6 ] * 255, // red\n                s[ (h|16) % 6 ] * 255, // green\n                s[ (h|8)  % 6 ] * 255  // blue\n            ];\n        },\n\n        toString: function(raw){\n            // backward compatibility with old toString, default to base64\n            if (raw) {\n                return this.render().getDump();\n            } else {\n                return this.render().getBase64();\n            }\n        },\n\n        isSvg: function(){\n            return this.format.match(/svg/i)\n        }\n    };\n\n    var Svg = function(size, foreground, background){\n        this.size       = size;\n        this.foreground = this.color.apply(this, foreground);\n        this.background = this.color.apply(this, background);\n        this.rectangles = [];\n    };\n\n    Svg.prototype = {\n        size:       null,\n        foreground: null,\n        background: null,\n        rectangles: null,\n\n        color: function(r, g, b, a){\n            var values = [r, g, b].map(Math.round);\n            values.push((a >= 0) && (a <= 255) ? a/255 : 1);\n            return 'rgba(' + values.join(',') + ')';\n        },\n\n        getDump: function(){\n          var i,\n                xml,\n                rect,\n                fg     = this.foreground,\n                bg     = this.background,\n                stroke = this.size * 0.005;\n\n            xml = \"<svg xmlns='http://www.w3.org/2000/svg'\"\n                + \" width='\" + this.size + \"' height='\" + this.size + \"'\"\n                + \" style='background-color:\" + bg + \";'>\"\n                + \"<g style='fill:\" + fg + \"; stroke:\" + fg + \"; stroke-width:\" + stroke + \";'>\";\n\n            for (i = 0; i < this.rectangles.length; i++) {\n                rect = this.rectangles[i];\n                if (rect.color == bg) continue;\n                xml += \"<rect \"\n                    + \" x='\"      + rect.x + \"'\"\n                    + \" y='\"      + rect.y + \"'\"\n                    + \" width='\"  + rect.w + \"'\"\n                    + \" height='\" + rect.h + \"'\"\n                    + \"/>\";\n            }\n            xml += \"</g></svg>\"\n\n            return xml;\n        },\n\n        getBase64: function(){\n            if ('function' === typeof btoa) {\n                return btoa(this.getDump());\n            } else if (Buffer) {\n                return new Buffer(this.getDump(), 'binary').toString('base64');\n            } else {\n                throw 'Cannot generate base64 output';\n            }\n        }\n    };\n\n    if (typeof module !== 'undefined' && typeof module.exports !== 'undefined') {\n        module.exports = Identicon;\n    } else {\n        window.Identicon = Identicon;\n    }\n})();\n"]},"metadata":{},"sourceType":"script"}